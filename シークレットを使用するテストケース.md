### ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã®ãƒ†ã‚¹ãƒˆæ‰‹é †

GitHub Actionsã§è¤‡æ•°ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å«ã‚€ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ†ã‚¹ãƒˆã™ã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚ã“ã®ãƒ†ã‚¹ãƒˆã¯ã€`act` ã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§GitHub Secretsã‚’æ¨¡å€£ã—ã€é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ä¸­ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒæ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

#### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™

1. **ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**:
   GitHub ãƒªãƒã‚¸ãƒˆãƒªå†…ã® `.github/workflows` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `use-multiple-secrets.yml` ã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚

2. **ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®šç¾©**:
   æ¬¡ã«ã€ä»¥ä¸‹ã®å†…å®¹ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã—ã¾ã™ã€‚ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ `push` ã‚¤ãƒ™ãƒ³ãƒˆã§ãƒˆãƒªã‚¬ãƒ¼ã•ã‚Œã€è¤‡æ•°ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ç’°å¢ƒå¤‰æ•°ã¨ã—ã¦ä½¿ç”¨ã—ã¾ã™ã€‚

   ```yaml
   name: Use Multiple Secrets in Workflow

   on: [push]

   jobs:
     build:
       runs-on: ubuntu-latest
       steps:
       - name: Checkout code
         uses: actions/checkout@v2
       
       - name: Use secrets
         run: |
           echo "The first secret is $FIRST_SECRET"
           echo "The second secret is $SECOND_SECRET"
         env:
           FIRST_SECRET: ${{ secrets.MY_SECRET }}
           SECOND_SECRET: ${{ secrets.ANOTHER_SECRET }}
   ```

#### ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆæ–¹æ³•

`act` ã‚’ä½¿ç”¨ã—ã¦ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã«ã¯ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®å€¤ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

1. **`.secrets` ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ**:
   ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `.secrets` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ãã®ä¸­ã«ãƒ†ã‚¹ãƒˆç”¨ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ `key=value` å½¢å¼ã§è¨˜è¿°ã—ã¾ã™ã€‚

   ```
   MY_SECRET=supersecretvalue1
   ANOTHER_SECRET=supersecretvalue2
   ```

2. **`act` ã§ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹**:
   `act` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹éš›ã«ã€`--secret` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ç”¨ã—ã¦å„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å€‹åˆ¥ã«æŒ‡å®šã—ã¾ã™ã€‚

   ```bash
    act push --secret-file .secrets -W .github/workflows/use-secrets.yml
   ```

   ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€æŒ‡å®šã•ã‚ŒãŸã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«æ¸¡ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ãã®å‹•ä½œã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

## çµæœã®ç¢ºèª

ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œå¾Œã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’ç¢ºèªã—ã€æ¬¡ã®ç‚¹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚

- ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒæ­£ã—ããƒˆãƒªã‚¬ãƒ¼ã•ã‚ŒãŸã‹ã€‚
- å„ã‚¹ãƒ†ãƒƒãƒ—ãŒæˆåŠŸã—ã¦ã„ã‚‹ã‹ã€‚
- æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ï¼ˆã“ã®ä¾‹ã§ã¯ "This workflow runs only on pushes to the main branch."ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ã€‚

```bash
act push --secret-file .secrets -W .github/workflows/use-secrets.yml
time="2024-04-21T00:04:07+09:00" level=info msg="Using docker host 'npipe:////./pipe/docker_engine', and daemon socket 'npipe:////./pipe/docker_engine'"
[Use Multiple Secrets in Workflow/build] ğŸš€  Start image=catthehacker/ubuntu:act-latest
[Use Multiple Secrets in Workflow/build]   ğŸ³  docker pull image=catthehacker/ubuntu:act-latest platform= username= forcePull=true
[Use Multiple Secrets in Workflow/build]   ğŸ³  docker create image=catthehacker/ubuntu:act-latest platform= entrypoint=["tail" "-f" "/dev/null"] cmd=[] network="host"
[Use Multiple Secrets in Workflow/build]   ğŸ³  docker run image=catthehacker/ubuntu:act-latest platform= entrypoint=["tail" "-f" "/dev/null"] cmd=[] network="host"
[Use Multiple Secrets in Workflow/build] â­ Run Main Checkout code
[Use Multiple Secrets in Workflow/build]   ğŸ³  docker cp src=D:\naoyadirectory\Gitãƒªãƒã‚¸ãƒˆãƒª\learn-act\. dst=/mnt/d/naoyadirectory/Gitãƒªãƒã‚¸ãƒˆãƒª/learn-act
[Use Multiple Secrets in Workflow/build]   âœ…  Success - Main Checkout code
[Use Multiple Secrets in Workflow/build] â­ Run Main Use secrets
[Use Multiple Secrets in Workflow/build]   ğŸ³  docker exec cmd=[bash --noprofile --norc -e -o pipefail /var/run/act/workflow/1] user= workdir=
| The first secret is ***
| The second secret is ***
[Use Multiple Secrets in Workflow/build]   âœ…  Success - Main Use secrets
[Use Multiple Secrets in Workflow/build] Cleaning up container for job build
[Use Multiple Secrets in Workflow/build] ğŸ  Job succeeded
```


#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®æ³¨æ„ç‚¹

- **`.secrets` ãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†**:
  `.secrets` ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã‚‹ãŸã‚ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã‚ˆã†ã« `.gitignore` ãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

- **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®å–ã‚Šæ‰±ã„**:
  ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å«ã‚€ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹éš›ã¯ã€ã‚³ãƒãƒ³ãƒ‰å±¥æ­´ã‚„ãƒ­ã‚°ã«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãŒæ®‹ã‚‰ãªã„ã‚ˆã†æ³¨æ„ã—ã¦ãã ã•ã„ã€‚
